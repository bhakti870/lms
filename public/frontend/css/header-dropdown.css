/* Header Dropdown Robust Fixes */

.navbar .dropdown,
.navbar .dropend,
.navbar .dropdown-menu li {
    position: relative !important;
}

/* 2. Style the dropdown menu for manual positioning */
.navbar .dropdown-menu {
    display: none;
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    right: auto !important;
    margin-top: 10px !important;
    transform: none !important;
    /* Disable Bootstrap's Popper transform */
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    border: none;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
    border-radius: 12px;
    z-index: 1000;
}

/* 3. Dropdown Menu Aligned Right for end items */
.navbar .dropdown-menu-end {
    left: auto !important;
    right: 0 !important;
}

/* 4. Show on Hover */
.navbar .dropdown:hover>.dropdown-menu,
.navbar .dropend:hover>.dropdown-menu {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
    margin-top: 0 !important;
}

/* 4.1 Nested Dropdown (Subcategories) Positioning */
.navbar .dropdown-menu .dropend>.dropdown-menu {
    top: 0 !important;
    left: 100% !important;
    margin-top: -5px !important;
    margin-left: 2px !important;
}

.navbar .dropdown-menu .dropend:hover>.dropdown-menu {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
}

/* 5. Special Fix for Notification/Profile items to prevent them from going off-screen */
@media (min-width: 992px) {
    .navbar .dropdown-menu-end {
        min-width: 250px;
    }
}

/* 6. Fix for sticky navbar positioning */
.navbar.sticky-top {
    z-index: 1030;
}

/* 7. Arrow indicator rotation on hover */
.navbar .dropdown-toggle::after {
    transition: transform 0.3s ease;
}

.navbar .dropdown:hover .dropdown-toggle::after {
    transform: rotate(180deg);
}

/* 8. Ensure no click event interference for hover */
.navbar .dropdown-toggle[data-bs-toggle="dropdown"] {
    pointer-events: auto;
}

/* 9. Dark mode support for dropdowns */
[data-theme="dark"] .navbar .dropdown-menu {
    background-color: #1e1e2f !important;
    border: 1px solid #2d2d44 !important;
    color: #e2e8f0 !important;
}

[data-theme="dark"] .navbar .dropdown-item {
    color: #e2e8f0 !important;
}

[data-theme="dark"] .navbar .dropdown-item:hover {
    background-color: #2d2d44 !important;
}

[data-theme="dark"] .navbar .dropdown-divider {
    border-top-color: #2d2d44 !important;
}